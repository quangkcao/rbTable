/* rbTable - Jquery plugin - Quang K. Cao runbusi.com MIT license*/
(function(b){var a={init:function(q){var e={bg:"none",row:"tr",row_bg:["none","#1785E6","#336699"],text_color:["","",""],pointer_box_border:[1,"dashed","#FFF"],};var l=b(document);var g=b(window);var k,m,d,m;var f;var c;var j;var p="row_click";var h="row_hover";return this.each(function(){if(q){b.extend(e,q)}b(this).bind("mousedown",n);b(this).bind("mouseup",i);b(this).bind("mouseleave",o);b(this).css({background:e.bg,cursor:"default"});b(this).data("defaults",{row:e.row,row_click:p,});b(this).append('<div class="pointer_box"></div>');b(".pointer_box",b(this)).css({position:"absolute",border:e.pointer_box_border[0]+"px "+e.pointer_box_border[1]+" "+e.pointer_box_border[2],display:"none","z-index":b(this).index()+1});b("."+e.row,b(this)).hover(function(){b(this).addClass(h);b("."+h,b(this).parent()).css({background:e.row_bg[1]});if(e.text_color[1]!=""){b("."+h,b(this).parent()).css({color:e.text_color[1]})}},function(){b(this).removeClass(h);b(this).css("background",e.row_bg[0]);if(e.text_color[0]!=""){b(this).css({color:e.text_color[0]})}if(b(this).hasClass(p)){b("."+p,b(this).parent()).css("background",e.row_bg[2]);if(e.text_color[2]!=""){b("."+p,b(this).parent()).css({color:e.text_color[2]})}}})});function o(r){b(".pointer_box",b(this)).hide();b(this).unbind("mousemove")}function n(x){b(this).css({"-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-o-user-select":"none","user-select":"none"});b(".pointer_box",b(this)).css({width:"0px",height:"0px",});var s=x.pageY;var w=x.pageX;var t=(g.attr("pageYOffset")||b(document.documentElement).attr("scrollTop"));b(".pointer_box",b(this)).offset({top:x.pageY+t,left:x.pageX});b(".pointer_box",b(this)).show();var u=0;var r=0;var y=0;var z=0;var v=true;s=x.pageY;if(x.shiftKey){b("."+e.row,b(this)).each(function(){if(b(this).hasClass(p+"_first")){if(s>b(this).offset().top){d=b(this).offset().top+1;hBox=x.pageY-d}else{d=x.pageY-1;hBox=b(this).offset().top-x.pageY+b(this).height()}}});c=b(this).offset().top;f=b(this).height();if((d>=c)&&(d<=(c+f))){b("."+e.row,b(this)).each(function(){k=b(this).offset().top;m=b(this).height();if(((k+m)>=d)&&(k<=(d+hBox))){if(!b(this).hasClass(p)){b(this).addClass(p);b(this).css("background",e.row_bg[2])}if(v){b(this).addClass(p+"_first")}v=false}else{b(this).removeClass(p);b(this).removeClass(p+"_first");b(this).css("background",e.row_bg[0]);if(e.text_color[0]!=""){b(this).css({color:e.text_color[0]})}}})}}else{if(x.ctrlKey){b("."+e.row,b(this)).each(function(){k=b(this).offset().top;m=b(this).height();if(((k+m)>=s)&&(k<=s)){if(b(this).hasClass(p)){b(this).removeClass(p);b(this).removeClass(p+"_first")}else{b(this).addClass(p);b(this).addClass(p+"_first")}}})}else{b("."+e.row,b(this)).each(function(){k=b(this).offset().top;m=b(this).height();if(((k+m)>=s)&&(k<=s)){if(!b(this).hasClass(p)){b(this).addClass(p)}b("."+p,b(this)).css("background",e.row_bg[2]);if(e.text_color[2]!=""){b("."+p,b(this)).css({color:e.text_color[2]})}if(v){b(this).addClass(p+"_first")}v=false}else{b(this).removeClass(p);b(this).removeClass(p+"_first");b(this).css("background",e.row_bg[0]);if(e.text_color[0]!=""){b(this).css({color:e.text_color[0]})}}})}}b(this).mousemove(function(A){if(A.pageX>=w){if(A.pageY<s){y=A.pageY;z=w;u=A.pageX-w;r=s-A.pageY}else{y=s;z=w;u=A.pageX-w;r=A.pageY-s}}else{if(A.pageY<s){y=A.pageY;z=A.pageX;u=w-A.pageX;r=s-A.pageY}else{y=s;z=A.pageX;u=w-A.pageX;r=A.pageY-s}}b(".pointer_box",b(this)).offset({top:y,left:z});b(".pointer_box",b(this)).width(u-2*e.pointer_box_border[0]);b(".pointer_box",b(this)).height(r-2*e.pointer_box_border[0]);d=b(".pointer_box",b(this)).offset().top;hBox=r;c=b(this).offset().top;f=b(this).height();if((d>=c)&&(d<=(c+f))){b("."+e.row,b(this)).each(function(){k=b(this).offset().top;m=b(this).height();if(((k+m)>=d)&&(k<=(d+hBox))){if(!b(this).hasClass(p)){b(this).addClass(p)}if(v){b(this).addClass(p+"_first")}v=false}else{if(!A.ctrlKey){b(this).removeClass(p);b(this).removeClass(p+"_first");b(this).css("background",e.row_bg[0]);if(e.text_color[0]!=""){b(this).css({color:e.text_color[0]})}}}})}})}function i(r){b(this).unbind("mousemove");b(".pointer_box",b(this)).hide();return false}},selected_rows:function(c){c=(typeof c=="undefined")?"name":c;var e=new Array();var d=b(this).data("defaults");b("."+d.row,b(this)).each(function(){if(b(this).hasClass(d.row_click)){if(c=="html"){e.push(b(this).html())}else{e.push(b(this).attr(c))}}});return e}};b.fn.rbTable=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist")}}}})(jQuery);